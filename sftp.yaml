default_profile: dev

defaults:
  SFTP_PORT: 22
  SFTP_USERNAME: root
  SFTP_PASSWORD: null  # CLI --password 나 환경변수로 입력
  SFTP_KEY_PATH: ~/.ssh/id_rsa

  REMOTE_ROOT: /remotepath/
  LOCAL_ROOT: "\\Gdp\ai\upload"
  ORDER:
    - 250922_2
    - 250923_기본
    - 250923_odt

  EXCLUDE_EXTS:
    - .mp4
    - .exe
    - .swf
    - .zip
    - .meta

  FILTER_INCLUDE_GLOBS: []
  FILTER_EXCLUDE_GLOBS:
    - "~$*"
    - "*.tmp"

  FILTER_MIN_SIZE: 0
  FILTER_MAX_SIZE: 0
  FILTER_NEWEST_SCOPE: off
  FILTER_NEWEST_COUNT: 1

  REQUIRE_META: true
  CONFIRM_PUT: true
  INCLUDE_ROOT_NAME: true
  SKIP_IF_EXISTS: size_equal
  RESUME_ENABLED: true
  UPLOAD_CHUNK_SIZE: 32768

  RATE_LIMIT_BPS: 0
  RATE_LIMIT_PER_FILE_BPS: 0

  MAX_WORKERS: 5
  RETRIES: 3
  BACKOFF_BASE: 1.0
  BACKOFF_MAX: 10.0
  BACKOFF_JITTER: 0.3

  VERIFY_HASH: true
  HASH_ALGO: sha256
  HASH_MAX_BYTES: 209715200

  PROGRESS: true
  PROGRESS_PRINT_INTERVAL: 0.5

  LOG_FILE: sftp_upload.log
  TIMEOUT: 30
  STRICT_HOST_KEY_CHECKING: false

  CREATE_END_TOUCH: false
  TOUCH_ONLY: false
  END_TOUCH_NAME: end.touch

  QUARANTINE_EXCLUDED: true
  QUARANTINE_FAILED: true

  SLACK_WEBHOOK_URL: null
  SMTP_SERVER: null
  SMTP_PORT: 587
  SMTP_USER: null
  SMTP_PASS: null
  SMTP_USE_TLS: true
  EMAIL_FROM: null
  EMAIL_TO: []

  SERVER_POLICIES:
    "192.168.127.12":
      max_workers: 5
      rate_limit_bps: 0
      retries: 3
      sftp_window_size: null
      sftp_max_packet_size: null
    "backup.example.com":
      max_workers: 2
      rate_limit_bps: 1500000
      retries: 5
      verify_hash: true

  INVENTORY_DB: ./inventory.sqlite
  INVENTORY_REMOTE_ROOT: /dpo_nas/aiupfile
  INVENTORY_HASH_MODE: changed
  INVENTORY_MAX_HASH_BYTES: 209715200
  INVENTORY_CASE_INSENSITIVE: false

  POSTGRES:
    host: dev-db.example.com
    port: 5432
    dbname: metadata
    user: reporter
    password: null
    sslmode: require
    table: public.file_metadata
    physical_column: physical_filename
    columns:
      - "brd_id|BRD_ID"
      - "brd_nm|BRD_NM 제목"
      - "cretr_id|CRETR_ID 등록자아이디"
      - "cretr_nm|USER_NM 등자명"
      - "red_dt|RED_DT"
      - "modr_nm|USER_NM 수정자명"
      - "chg_dt|CHG_DT 수정일시"
      - "work_div_cd|BRD_JVAL 업무분류코드"
      - "work_div_nm|CD_NM 업무분류명"
      - "dept_cd|BRD_JVAL 부서코드"
      - "dept_nm|CD_NM DEPT_NM"
      - "project_code|과제코드"
      - "gubun1|gubun1"
      - "function_code|기능코드"
      - "gubun2|gubun2"
      - "field_code|분야코드"
      - "gubun3|gubun3"
      - "data_type_cd|데이터 유형 코드"
      - "data_type_nm|데이터 유형 명"
      - "scope_cd|적용범위 코드"
      - "scope_nm|적용범위명"
      - "school_scope_cd|공/사립 적용범위 코드"
      - "school_scope_nm|공/사립 적용범위명"
      - "service_citizen_cd|서비스 유형 - 대국민 코드"
      - "service_citizen_nm|서비스 유형 - 대국민명"
      - "service_staff_cd|서비스 유형 - 교직원 코드"
      - "service_staff_nm|서비스 유형 - 교직원 명"
      - "file_year|파일 생산연도"
      - "open_yn|파일공개여부"
      - "personal_data_yn|개인정보 포함여부"
      - "ai_service_yn|AI 서비스 사용여부"
      - "need_historical_learning_yn|과거자료 학습 필요여부"
      - "remark|비고"
      - "file_count|파일수"
      - "original_filename|파일명"
      - "physical_filename|물리파일명"
      - "tot_cnt|tot_cnt"
    excel_columns:
      - "BRD_ID"
      - "BRD_NM 제목"
      - "CRETR_ID 등록자아이디"
      - "USER_NM 등자명"
      - "RED_DT"
      - "USER_NM 수정자명"
      - "CHG_DT 수정일시"
      - "BRD_JVAL 업무분류코드"
      - "CD_NM 업무분류명"
      - "BRD_JVAL 부서코드"
      - "CD_NM DEPT_NM"
      - "과제코드"
      - "gubun1"
      - "기능코드"
      - "gubun2"
      - "분야코드"
      - "gubun3"
      - "데이터 유형 코드"
      - "데이터 유형 명"
      - "적용범위 코드"
      - "적용범위명"
      - "공/사립 적용범위 코드"
      - "공/사립 적용범위명"
      - "서비스 유형 - 대국민 코드"
      - "서비스 유형 - 대국민명"
      - "서비스 유형 - 교직원 코드"
      - "서비스 유형 - 교직원 명"
      - "파일 생산연도"
      - "파일공개여부"
      - "개인정보 포함여부"
      - "AI 서비스 사용여부"
      - "과거자료 학습 필요여부"
      - "비고"
      - "파일수"
      - "파일명"
      - "물리파일명"
      - "파일패스"
      - "tot_cnt"
      - "제외여부"
    case_insensitive: true

  ELASTICSEARCH:
    base_url: http://localhost:9200
    kibana_url: http://localhost:5601
    api_user: null
    api_pass: null
    verify_ssl: true
    timeout: 10
    default_index: null
    nodes:
      - name: es-local
        host: 192.168.127.12
        ssh_port: 22
        ssh_user: root
        ssh_key_path: ~/.ssh/id_rsa

profiles:
  dev:
    SFTP_HOST: 192.168.127.12
    ELASTICSEARCH:
      base_url: http://dev-es.example.com:9200
      kibana_url: http://dev-kibana.example.com:5601
      nodes:
        - name: es-dev-1
          host: 192.168.127.12
          ssh_user: root
          ssh_key_path: ~/.ssh/id_rsa
        - name: es-dev-2
          host: 192.168.127.13
          ssh_user: root
          ssh_key_path: ~/.ssh/id_rsa
  prd:
    SFTP_HOST: prd.example.com  # 실제 PRD 호스트로 교체
    REMOTE_ROOT: /remotepath/
    ELASTICSEARCH:
      base_url: https://prd-es.example.com:9243
      kibana_url: https://prd-kibana.example.com:5601
      verify_ssl: true
      nodes:
        - name: es-prd-1
          host: prd-es-node1.example.com
          ssh_user: sftp
          ssh_key_path: ~/.ssh/prd_es
        - name: es-prd-2
          host: prd-es-node2.example.com
          ssh_user: sftp
          ssh_key_path: ~/.ssh/prd_es
